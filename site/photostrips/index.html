<html>
  <head>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script>
      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
          var pair = vars[i].split("=");
          if(pair[0] == variable){return pair[1];}
        }
        return false;
      }

      // Blank / unescape

      function sendRenderComplete(ws) {
        ws.send('renderComplete');
      }

      window.onload = function() {
        var ws = new WebSocket('ws://127.0.0.1:8088');
        var inPath = '/'+unescape(getQueryVariable('inPath'));
        var images = unescape(getQueryVariable('images')).split(',');
        var imagePaths = [];
        var imagesToLoad = images.width > 4 ? 4 : images.length;

        images.forEach(function (imagePath, index) {
          if (index < 4) {
            var path = inPath + imagePath;
            var img = document.getElementsByClassName('photo-'+index);
            img[0].onload = function() {
              imagesToLoad--;
              if (imagesToLoad === 0) {
                sendRenderComplete(ws);
              }
            }

            img[0].setAttribute('src', path);
            img[1].setAttribute('src', path);
          }
        });
      }
    </script>
  </head>

  <body style="margin: 0; padding: 0; background-color: white;">

  <div style="width: 1200px; background-color: white; margin-top: 30px;">
    <div class="photostrip" style="background-color: white; float: left; width: 600px; height: 1800px; overflow: hidden;">
      <img class="photo-0" src="blank.png" width="100%" height="auto">
      <img class="photo-1" src="blank.png" width="100%" height="auto">
      <img class="photo-2" src="blank.png" width="100%" height="auto">
      <img class="photo-3" src="blank.png" width="100%" height="auto">
      <img src="horizon-logo.png" width="100%" height="auto">
    </div>

    <div class="photostrip" style="background-color: white; float: left; width: 600px; height: 1800px; overflow: hidden;">
      <img class="photo-0" src="blank.png" width="100%" height="auto">
      <img class="photo-1" src="blank.png" width="100%" height="auto">
      <img class="photo-2" src="blank.png" width="100%" height="auto">
      <img class="photo-3" src="blank.png" width="100%" height="auto">
      <img src="horizon-logo.png" width="100%" height="auto">
    </div>
  </div>

  </body>
</html>